<div class="container">
  <app-page-header>
    <h1>Upload System</h1>
  </app-page-header>


  <p>
    Every system that should be benchmarked on the Hobbit platform needs to be uploaded to it. This uploading comprises several
    steps. Note that a <a href="https://github.com/hobbit-project/platform/wiki/User-registration" target="_blank">user profile</a>    is necessary to have the right to upload something to the platform.
  </p>

  <ol>
    <li>
      Before uploading something, an adapter for the system needs to be developed, so that the system fits into the platform and
      is able to interact with the benchmark with which it should be benchmarked. The general development of the adapter
      is
      <a href="https://github.com/hobbit-project/platform/wiki/Develop-a-system-adapter" target="_blank"> described here</a>.
    </li>
    <li>
      The second step is the creation of a project in the <a href="http://git.project-hobbit.eu/" target="_blank"> gitlab instance</a>      of the platform. For that you can use the same account as for the platform itself. (The project should have the same
      name as the system. Please have a look at the <a href="https://github.com/hobbit-project/platform/wiki/Push-a-docker-image"
        target="_blank"> image upload</a> and its hints regarding the project name.)
    </li>
    <li>
      After creating a git project, you need to push the Docker image to the git project as <a href="https://github.com/hobbit-project/platform/wiki/Push-a-docker-image"
        target="_blank">described here</a>.
    </li>
    <li>
      The final step is to put the meta data describing your system into a file called system.ttl and push it to the git project.
      The format of the file is <a href="https://github.com/hobbit-project/platform/wiki/System-meta-data-file" target="_blank">described here</a>.
    </li>
  </ol>

  <p>
    After uploading a system, starting an experiment including the uploaded system and the benchmark for which the adapter has
    been implemented is recommended to make sure that the adapter is working as expected.
  </p>

  <div *ngIf="benchmarks">
    <hr>
    <h2>Generate Meta file</h2>
    <form #generatesystem="ngForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="system-name">System Name</label>
        <input type="text" class="form-control" id="system-name" name="system-name" aria-describedby="systemName" placeholder="System Name"
          [(ngModel)]="system.name" required>
        <small id="system-name-help" class="form-text text-muted">A speaking name to describe your system.</small>
      </div>


      <div class="form-group">
        <label for="system-uri">System URI</label>
        <div class="row">
          <div class="col-11">
            <input type="text" class="form-control" id="system-uri" name="system-uri" aria-describedby="systemUri" placeholder="System URI"
              [(ngModel)]="system.id" required>
          </div>
          <div class="col-1">
            <button class="btn" (click)="generateURI($event)" title="Generate URI" [disabled]="!system.name">
                <i class="fa fa-cogs" aria-hidden="true"></i>
            </button>
          </div>
        </div>
        <small id="system-uri-help" class="form-text text-muted">Your system name has to be a vaild URI. Alernatively, use the button to automatically create a URI.</small>
      </div>

      <div class="form-group">
        <label for="system-name">System Description</label>
        <input type="text" class="form-control" id="system-description" name="system-description" aria-describedby="systemDescription"
          placeholder="System Description" [(ngModel)]="system.description">
        <small id="system-description-help" class="form-text text-muted">An optional description of your system.</small>
      </div>

      <div class="form-group">
        <label for="system-docker">Gitlab Docker File</label>
        <input type="text" class="form-control" id="system-docker" name="system-docker" aria-describedby="systemDocker" placeholder="Gitlab Docker File"
          [(ngModel)]="system.dockerImage" required>
        <small id="system-description-help" class="form-text text-muted">The Gitlab file containing your system</small>
      </div>

      <div class="form-group">
        <label for="benchmark">Benchmark API</label>
        <select class="form-control" id="benchmark" required [title]="selectedBenchmark ? selectedBenchmark.description : ''" [ngModel]="selectedBenchmark"
          [(ngModel)]="system.benchmarkApi" name="benchmark">
          <option *ngFor="let b of benchmarks" [value]="b.id" [title]="b.description">{{b.name}}</option>
        </select>
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="!generatesystem.form.valid">Submit</button>
    </form>


    <pre *ngIf="metaFile.msg" class="mt-3" [ngClass]="{'error' : metaFile.error}">{{metaFile.msg}}</pre>


  </div>
</div>